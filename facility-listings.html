<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Global Care Givers Database</title>
    <link rel="shortcut icon" href="assets/icons/logo.svg" type="image/x-icon" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="admin-dashboard/css/main.css">
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <link rel="stylesheet" href="css/responsive-1.css" />
    <link rel="stylesheet" href="css/facility.css" />
</head>

<body>
    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-light">
        <div class="container">
            <!-- Logo -->
            <a class="navbar-brand" href="/">
                <img src="assets/images/logo.png" width="145" class="img-fluid logo" alt="logo">
            </a>

            <!-- Mobile Toggle Button -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Navbar Links -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul
                    class="navbar-nav align-items-lg-center justify-content-lg-center flex-lg-grow-1 mb-2 mb-lg-0 mt-lg-0 mt-4 d-lg-none">
                    <!-- <li class="nav-item">
                                            <a class="nav-link mx-2 text-primary" href="#">Emergency</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link mx-2 text-primary" href="#">Community</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link mx-2 text-primary" href="#" id="registerBtn">Register</a>
                                        </li> -->
                    <li class="nav-item">
                        <a class="nav-link mx-2 text-primary" href="facility-listings.html">Facility
                            Listings</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link mx-2 text-primary" href="/my-account/health-facilities.html">My Account</a>
                    </li>
                    <li class="nav-item d-none" id="nav-admin-dashboard">
                        <a class="nav-link mx-2 text-primary" href="/admin-dashboard/health-facilities.html">Admin
                            Dashboard</a>
                    </li>
                    <li class="nav-item  d-lg-none" id="logout-btn-container">
                        <button
                            class="dropdown-item py-2 text-primary fw-semibold logout-btn nav-link mx-2 text-primary"
                            id="logout-btn2">
                            Logout
                        </button>
                    </li>
                </ul>

                <!-- Login Button -->
                <div class="d-flex ms-lg-auto" id="login-btn">
                    <a href="login.html" class="btn primary-btn">Login</a>
                </div>

                <div class="d-flex ms-lg-auto d-none" id="profile-btn">
                    <div class="dropdown d-none d-lg-block">
                        <div class="dropdown-toggle d-flex align-items-center gap-2 show" data-bs-toggle="dropdown"
                            style="cursor: pointer;" aria-expanded="true">
                            <img src="assets/1.png" alt="" class="user-avatar">
                            <span class=" d-inline user-name"></span>
                        </div>
                        <ul class="dropdown-menu shadow"
                            style="width: 313px; padding: 16px; border-radius: 0px; border: none; position: absolute; inset: 0px 0px auto auto; margin: 0px; transform: translate(0px, 42.2222px);"
                            data-popper-placement="bottom-end">
                            <li class="dropdown-header p-0 mb-3">
                                <div class="d-flex gap-3 align-items-center">
                                    <img src="assets/1.png" width="30" class="img-fluid" alt=""
                                        style="width: 87px; height: 87px; border-radius: 50%;">
                                    <div>
                                        <h6 class="mb-0 user-name"></h6>
                                        <small class="text-muted" id="user-role"></small>
                                    </div>
                                </div>
                            </li>
                            <li id="admin-dashboard" class="d-none"><a
                                    class="dropdown-item py-2 d-flex align-items-center gap-3"
                                    href="/admin-dashboard/health-facilities.html">
                                    <img src="assets/images/user.png" width="25" alt="">
                                    Admin Dashboard
                                </a></li>
                            <li><a class="dropdown-item py-2 d-flex align-items-center gap-3"
                                    href="/my-account/health-facilities.html">
                                    <img src="assets/images/user.png" width="25" alt="">
                                    My Account
                                </a></li>
                            <li><a class="dropdown-item py-2 d-flex align-items-center gap-3"
                                    href="/facility-listings.html">
                                    <svg width="26px" height="26px" viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                            d="M21.5 8.5C21.5 7.09554 21.5 6.39331 21.1629 5.88886C21.017 5.67048 20.8295 5.48298 20.6111 5.33706C20.1699 5.04224 19.5774 5.00529 18.496 5.00066C18.5001 5.29206 18.5 5.59655 18.5 5.91051L18.5 6V7.25H19.5C19.9142 7.25 20.25 7.58579 20.25 8C20.25 8.41421 19.9142 8.75 19.5 8.75H18.5V10.25H19.5C19.9142 10.25 20.25 10.5858 20.25 11C20.25 11.4142 19.9142 11.75 19.5 11.75H18.5V13.25H19.5C19.9142 13.25 20.25 13.5858 20.25 14C20.25 14.4142 19.9142 14.75 19.5 14.75H18.5V21.25H17V6C17 4.11438 17 3.17157 16.4142 2.58579C15.8284 2 14.8856 2 13 2H11C9.11438 2 8.17157 2 7.58579 2.58579C7 3.17157 7 4.11438 7 6V21.25H5.5V14.75H4.5C4.08579 14.75 3.75 14.4142 3.75 14C3.75 13.5858 4.08579 13.25 4.5 13.25H5.5V11.75H4.5C4.08579 11.75 3.75 11.4142 3.75 11C3.75 10.5858 4.08579 10.25 4.5 10.25H5.5V8.75H4.5C4.08579 8.75 3.75 8.41421 3.75 8C3.75 7.58579 4.08579 7.25 4.5 7.25H5.5V6L5.49999 5.9105C5.49996 5.59655 5.49992 5.29206 5.50403 5.00066C4.42262 5.00529 3.83008 5.04224 3.38886 5.33706C3.17048 5.48298 2.98298 5.67048 2.83706 5.88886C2.5 6.39331 2.5 7.09554 2.5 8.5V21.25H2C1.58579 21.25 1.25 21.5858 1.25 22C1.25 22.4142 1.58579 22.75 2 22.75H22C22.4142 22.75 22.75 22.4142 22.75 22C22.75 21.5858 22.4142 21.25 22 21.25H21.5V8.5ZM12 4.25C12.4142 4.25 12.75 4.58579 12.75 5V6.25H14C14.4142 6.25 14.75 6.58579 14.75 7C14.75 7.41421 14.4142 7.75 14 7.75H12.75V9C12.75 9.41421 12.4142 9.75 12 9.75C11.5858 9.75 11.25 9.41421 11.25 9V7.75H10C9.58579 7.75 9.25 7.41421 9.25 7C9.25 6.58579 9.58579 6.25 10 6.25H11.25V5C11.25 4.58579 11.5858 4.25 12 4.25ZM9.25 12C9.25 11.5858 9.58579 11.25 10 11.25H14C14.4142 11.25 14.75 11.5858 14.75 12C14.75 12.4142 14.4142 12.75 14 12.75H10C9.58579 12.75 9.25 12.4142 9.25 12ZM9.25 15C9.25 14.5858 9.58579 14.25 10 14.25H14C14.4142 14.25 14.75 14.5858 14.75 15C14.75 15.4142 14.4142 15.75 14 15.75H10C9.58579 15.75 9.25 15.4142 9.25 15ZM12 18.25C12.4142 18.25 12.75 18.5858 12.75 19V21.25H11.25V19C11.25 18.5858 11.5858 18.25 12 18.25Z"
                                            fill="#000" />
                                    </svg>
                                    Facility Listings
                                </a></li>
                            <div class="border-top mt-2 pt-2">
                                <button class="dropdown-item py-2 text-primary fw-semibold" id="logout-btn">
                                    Logout
                                </button>
                            </div>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </nav>

    <!-- Navbar End -->

    <!-- Main Content Start -->
    <div class="main-content">
        <div class="container">
            <!-- Search & Filter  -->
            <div class="d-flex align-items-center justify-content-lg-between seach-filter">
                <div class="search-box">
                    <input type="text" id="searchInput" class="form-control" placeholder="Search">
                </div>
                <div class="dropdown sort-filter">
                    <button class="btn btn-outline-secondary dropdown-toggle" id="sort-filter" type="button"
                        data-bs-toggle="dropdown">
                        Sort by : <span style="font-weight: bold; color:black;">Newest</span>
                    </button>
                    <ul class="dropdown-menu w-100">
                        <li class="dropdown-item" id="sortNewest">Newest</li>
                        <li class="dropdown-item" id="sortOldest">Oldest</li>
                    </ul>
                </div>
            </div>
            <!-- Facility Container  -->
            <div class="facility-container mt-5">
                <div class="row g-5" id="facility-container">

                </div>
            </div>
            <!-- Pagination  -->
            <div class="d-flex flex-column-reverse flex-sm-row justify-content-between align-items-center mt-5">
                <div class="text-muted pagination-info">
                    Showing data 1 to 4 of 500 entries
                </div>
                <div class="d-flex justify-content-center align-items-center gap-4">
                    <nav>
                        <ul class="pagination mb-0" id="pagination">
                        </ul>
                    </nav>
                    <select id="pageSize" class="form-select w-auto" onchange="getData(1)">
                        <option value="10" selected>10</option>
                        <option value="20">20</option>
                        <option value="30">30</option>
                        <option value="40">40</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <!--  Main Content End -->
    <!-- Share Popup  Start -->
    <div class="popup d-none justify-content-center align-items-center" id="share-popup">
        <div class="share-box bg-white rounded position-relative ">
            <div>
                <h4>Share</h4>
            </div>
            <div class="d-flex flex-column social-button">
                <button class="fb-share-btn">
                    <img src="assets/images/facebook.png" alt="Facebook">
                    <span class="mx-3">Facebook</span>
                </button>
                <button class="whatsapp-share-btn">
                    <img src="assets/images/whats app.png" alt="WhatsApp">
                    <span class="mx-3">WhatsApp</span>
                </button>
                <button class="x-share-btn">
                    <img src="assets/images/x.png" alt="X">
                    <span class="mx-3">X</span>
                </button>
                <button class="email-share-btn">
                    <img src="assets/images/email.png" alt="Email">
                    <span class="mx-3">Email</span>
                </button>
            </div>
            <div class="close-btn">
                <button class="btn border-0" type="submit" id="share-close"><img src="assets/icons/close.svg"
                        alt="close"></button>
            </div>
        </div>
    </div>
    <!-- Share Popup  End -->
    <!-- Footer start -->
    <footer class="footer-section">
        <div class="container">
            <div class="footer-card">
                <div class="footer-img text-center">
                    <a href="/">
                        <img src="assets/images/logo.png" width="150" alt="" class="img-fluid logo">
                    </a>
                </div>
            </div>
        </div>
        <hr class="mt-4 mb-2">
        <div class="">
            <div class="copyright-section d-flex align-items-center">
                <p class="font-size">© Copyright 2025 HealthMonitor. All rights reserved</p>
                <p class="ms-md-auto me-3 font-size">Share on socials</p>
                <div class="social-media">
                    <img src="assets/icons/X.svg" alt="img" class="x-share-btn">
                    <img src="assets/icons/Facebook.svg" alt="img" class="fb-share-btn">
                    <a href="https://www.instagram.com/">
                        <img src="assets/icons/Instagram.svg" alt="img">
                    </a>
                    <img src="assets/icons/linkedin.svg" alt="img" id="linkedin-share-btn" class="linkedin-share-btn">
                </div>
            </div>
            <div class="develop-by w-25 ms-auto">
                <p>
                    Developed by <a href="https://nxtgenwebsites.com/" target="_blank"
                        class="text-noWrap link-secondary hoverable-link">Nxt
                        Gen Websites</a>
                </p>
            </div>
        </div>

    </footer>
    <!-- Footer end -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.full.min.js"></script>
    <script src="js/share.js"></script>
    <script>

        let time_slots = [];
        const id = localStorage.getItem('u_id');
        axios.get('https://health-care-facilities-backend.vercel.app/api/get-user', {
            headers: {
                'id': id
            }
        }).then((res) => {
            user = res.data.user.name;
            const userName = document.querySelectorAll('.user-name');
            const email = document.getElementById('user-role');

            userName.forEach((name) => {
                name.innerHTML = `${res.data.user.name} ${res.data.user.last_name}`;
            })

            email.innerHTML = res.data.user.role

            if (res.data.user.role === 'super admin') {
                document.getElementById('admin-dashboard').classList.remove('d-none');
                document.getElementById('nav-admin-dashboard').classList.remove('d-none');
            } else {
                document.getElementById('admin-dashboard').classList.add('d-none');
                document.getElementById('nav-admin-dashboard').classList.add('d-none');
            }
        }).catch((err) => {
            console.log(err);
        })

        const isLoginIn = localStorage.getItem('login');
        const loginBtn = document.getElementById('login-btn');
        const loginOut = document.getElementById('logout-btn');
        const loginOut2 = document.getElementById('logout-btn2');
        const profileBtn = document.getElementById('profile-btn');
        const logoutBtnContainer = document.getElementById('logout-btn-container');

        if (isLoginIn === 'true') {
            loginBtn.classList.add('d-none');
            profileBtn.classList.remove('d-none');
            logoutBtnContainer.classList.remove('d-none');
        } else {
            location.href = '/login.html';
            loginBtn.classList.remove('d-none');
            profileBtn.classList.add('d-none');
            logoutBtnContainer.classList.add('d-none');

        }

        loginOut.addEventListener(('click'), () => {
            localStorage.removeItem('login')
            localStorage.removeItem('u_id')
            location.reload()
        })
        loginOut2.addEventListener(('click'), () => {
            localStorage.removeItem('login')
            localStorage.removeItem('userId')
            location.reload()
        })

        const facilityContainer = document.getElementById('facility-container');

        let totalRecords = 0;
        let currentPage = 1;
        let allData = [];
        let deleteFacilityId;

        async function getData(page) {
            const pageSize = document.getElementById("pageSize").value;
            currentPage = page;


            try {
                const res = await axios.get('https://health-care-facilities-backend.vercel.app/api/get-reports');
                allData = res.data.data;
                totalRecords = allData.length;

                console.log(allData);
                renderCard(allData);

                const start = (page - 1) * pageSize;
                const end = start + parseInt(pageSize);
                const paginatedData = allData.slice(start, end);

                document.querySelector(".pagination-info").textContent = `Showing data ${start + 1} to ${end} of ${totalRecords} entries`;

                renderPagination(totalRecords, pageSize, page);

                facilityContainer.innerHTML = "";

                paginatedData.forEach((item) => {
                    let timingHTML = '';
                    let facilityAEHTML = '';
                    const timeSlots = item.time_slots;

                    // Handle 24-hour timing
                    const startTime = item.time_slots[0]?.start_time;
                    const endTime = item.time_slots[0]?.end_time;

                    function convertDecimalToTime(decimalString) {
                        let decimal = parseFloat(decimalString);
                        let totalMinutes = Math.round(decimal * 24 * 60);
                        let hours = Math.floor(totalMinutes / 60);
                        let minutes = totalMinutes % 60;
                        let ampm = hours >= 12 ? "PM" : "AM";

                        // Convert 24-hour format to 12-hour format
                        hours = hours % 12 || 12;

                        // Format time as HH:MM AM/PM
                        return `${hours}:${minutes.toString().padStart(2, "0")} ${ampm}`;
                    }

                    // Convert `start_time` and `end_time` to time format
                    let openTime = convertDecimalToTime(startTime);
                    let closeTime = convertDecimalToTime(endTime);

                    if (item.is_24_hours === 'no') {
                        const timeSlots = item.time_slots;
                        if (timeSlots && timeSlots.length > 0) {
                            function formatTime(time) {
                                let [hours, minutes] = time.split(":").map(Number);
                                let period = hours >= 12 ? "PM" : "AM";
                                hours = hours % 12 || 12;
                                return `${hours}:${minutes.toString().padStart(2, "0")} ${period}`;
                            }

                            const openingTime = formatTime(timeSlots[0].start_time);
                            const closingTime = formatTime(timeSlots[0].end_time);

                            timingHTML = `<p class="hours-normal mb-1">Opens ${openingTime} - Closes ${closingTime}</p>`;
                        } else if (item.is_24_hours === 'no') {

                        }
                    } else {
                        if (startTime) {
                            if (startTime === '-') {
                                timingHTML = `<p class="hours-24 mb-1">Open 24 Hours</p>`;
                            }
                            else {
                                timingHTML = `<p class="hours-normal mb-1">Opens ${openTime} - Closes ${closeTime}</p>`;
                            }
                        } else {
                            if (item.is_24_hours === 'yes') {
                                timingHTML = `<p class="hours-24 mb-1">Open 24 Hours</p>`;
                            }
                        }
                    }

                    // Handle A&E facility
                    if (item.facility_a_e === 'yes') {
                        facilityAEHTML = `<p class="facility-ae mb-1">A&E Facility</p>`;
                    }

                    facilityContainer.innerHTML += `
        <div class="col-12 p-0 col-sm-6 col-md-4 px-3 card-col h-100">
            <div class="facility-card p-4">
                <div class="text-center mb-3">
                    <h2 class="facility-name mb-1">${item.organisation_name}</h2>
                    <p class="facility-type mb-3">${item.facility_type.charAt(0).toUpperCase() + item.facility_type.slice(1)} , ${item.city} , ${item.state} , ${item.country}</p>
                </div>

                <div class="d-flex justify-content-center gap-2 mb-4">
                    <button class="btn btn-light px-3 py-1 rounded-pill share-btn">
                        <i class="bi bi-share"></i> Share
                    </button>
                        <a href="${item.google_maps_link}" target="_blank">
                <button class="btn btn-light px-3 py-1 rounded-pill directions-btn">
                   <i class="bi bi-geo-alt"></i> Directions
                   </button>
                  </a>
                </div>

                <div class="text-center mb-3">
                    <h6 class="address-label mb-2">Address</h6>
                    <p class="facility-address mb-3">${item.address ? `${item.address}, ` : ""}
                        ${item.zip_code ? `${item.zip_code}, ` : ""}
                        ${item.city}, ${item.state}, ${item.country}</p>
                </div>

                <div class="text-center mb-3">
                    <div class="facility-email mb-1"><a href="mailto:${item.email}">${item.email}</a></div>
                    <div class="facility-phone"><a href="tel:${item.phone}">${item.phone}</a></div>
                </div>

                <div class="text-center mb-3 facility-box">
                    ${facilityAEHTML}
                </div>

                <div class="text-center timing-box">
                    ${timingHTML}
                </div>
            </div>
        </div>
    `;
                    // Show Share Popup 
                    const shareBtn = document.querySelectorAll('.share-btn');
                    shareBtn.forEach((button) => {
                        button.addEventListener(('click'), () => {
                            shareFun()
                        })
                    })

                });

                // Get all delete buttons
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        //  Search Function
        document.getElementById("searchInput").addEventListener("input", function () {
            let query = this.value.toLowerCase();
            let filteredData = allData.filter(item =>
                item.organisation_name.toLowerCase().includes(query) ||
                item.email.toLowerCase().includes(query)
            );
            renderCard(filteredData);
        });

        //  Sorting Function
        document.getElementById("sortNewest").addEventListener("click", function () {
            let sortedData = [...allData].sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            renderCard(sortedData);
        });

        document.getElementById("sortOldest").addEventListener("click", function () {
            let sortedData = [...allData].sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));
            renderCard(sortedData);
        });

        //  Table Render Function
        function renderCard(data) {
            facilityContainer.innerHTML = ''

            data.forEach((item) => {
                let timingHTML = '';
                let facilityAEHTML = '';
                const timeSlots = item.time_slots;

                // Handle 24-hour timing
                const startTime = item.time_slots[0]?.start_time;
                const endTime = item.time_slots[0]?.end_time;

                function convertDecimalToTime(decimalString) {
                    let decimal = parseFloat(decimalString);
                    let totalMinutes = Math.round(decimal * 24 * 60);
                    let hours = Math.floor(totalMinutes / 60);
                    let minutes = totalMinutes % 60;
                    let ampm = hours >= 12 ? "PM" : "AM";

                    // Convert 24-hour format to 12-hour format
                    hours = hours % 12 || 12;

                    // Format time as HH:MM AM/PM
                    return `${hours}:${minutes.toString().padStart(2, "0")} ${ampm}`;
                }

                // Convert `start_time` and `end_time` to time format
                let openTime = convertDecimalToTime(startTime);
                let closeTime = convertDecimalToTime(endTime);

                if (item.is_24_hours === 'no') {
                    const timeSlots = item.time_slots;
                    if (timeSlots && timeSlots.length > 0) {
                        function formatTime(time) {
                            let [hours, minutes] = time.split(":").map(Number);
                            let period = hours >= 12 ? "PM" : "AM";
                            hours = hours % 12 || 12;
                            return `${hours}:${minutes.toString().padStart(2, "0")} ${period}`;
                        }

                        const openingTime = formatTime(timeSlots[0].start_time);
                        const closingTime = formatTime(timeSlots[0].end_time);


                        timingHTML = `<p class="hours-normal mb-1">Opens ${openingTime} - Closes ${closingTime}</p>`;
                    } else if (item.is_24_hours === 'no') {

                    }
                } else {
                    if (startTime) {
                        if (startTime === '-') {
                            timingHTML = `<p class="hours-24 mb-1">Open 24 Hours</p>`;
                        }
                        else {
                            timingHTML = `<p class="hours-normal mb-1">Opens ${openTime} - Closes ${closeTime}</p>`;
                        }
                    } else {
                        if (item.is_24_hours === 'yes') {
                            timingHTML = `<p class="hours-24 mb-1">Open 24 Hours</p>`;
                        }
                    }
                }

                // Handle A&E facility
                if (item.facility_a_e === 'yes') {
                    facilityAEHTML = `<p class="facility-ae mb-1">A&E Facility</p>`;
                }

                facilityContainer.innerHTML += `
        <div class="col-12 p-0 col-sm-6 col-md-4 px-3 h-100 card-col">
            <div class="facility-card p-4">
                <div class="text-center mb-3">
                    <h2 class="facility-name mb-1">${item.organisation_name}</h2>
                    <p class="facility-type mb-3">${item.facility_type.charAt(0).toUpperCase() + item.facility_type.slice(1)} , ${item.city} , ${item.state} , ${item.country}</p>
                </div>

                <div class="d-flex justify-content-center gap-2 mb-4">
                    <button class="btn btn-light px-3 py-1 rounded-pill share-btn">
                        <i class="bi bi-share"></i> Share
                    </button>
                     <a href="${item.google_maps_link}" target="_blank">
                <button class="btn btn-light px-3 py-1 rounded-pill directions-btn">
                   <i class="bi bi-geo-alt"></i> Directions
                   </button>
                  </a>
                </div>

                <div class="text-center mb-3">
                    <h6 class="address-label mb-2">Address</h6>
                    <p class="facility-address mb-3">${item.address ? `${item.address}, ` : ""}
                        ${item.zip_code ? `${item.zip_code}, ` : ""}
                        ${item.city}, ${item.state}, ${item.country}</p>
                </div>

                <div class="text-center mb-3">
                    <div class="facility-email mb-1"><a href="mailto:${item.email}">${item.email}</a></div>
                    <div class="facility-phone"><a href="tel:${item.phone}">${item.phone}</a></div>
                </div>

                <div class="text-center mb-3 facility-box">
                    ${facilityAEHTML}
                </div>

                <div class="text-center timing-box">
                    ${timingHTML}
                </div>
            </div>
        </div>
    `;
                // Show Share Popup 
                const shareBtn = document.querySelectorAll('.share-btn');
                shareBtn.forEach((button) => {
                    button.addEventListener(('click'), () => {
                        shareFun()
                    })
                })
            });

        }


        const sharePopup = document.getElementById('share-popup');
        const shareCloseBtn = document.getElementById('share-close');

        shareCloseBtn.addEventListener(('click'), () => {
            sharePopup.classList.add('d-none');
        })

        sharePopup.addEventListener(('click'), (e) => {
            if (e.target === sharePopup) {
                sharePopup.classList.add('d-none');
            }
        })

        const shareFun = () => {
            sharePopup.classList.remove('d-none');
        }


        document.addEventListener("DOMContentLoaded", function () {
            const sortNewest = document.getElementById("sortNewest");
            const sortOldest = document.getElementById("sortOldest");
            const sortLabel = document.getElementById("sort-filter");

            // Newest click event
            sortNewest.addEventListener("click", function () {
                sortLabel.innerHTML = `Sort by: <span style="font-weight: bold; color:black;">Newest</span>`;
            });

            // Oldest click event
            sortOldest.addEventListener("click", function () {
                sortLabel.innerHTML = `Sort by: <span style="font-weight: bold; color:black;">Oldest</span>`;
            });
        });


        function renderPagination(total, pageSize, currentPage) {
            const pagination = document.getElementById("pagination");
            pagination.innerHTML = "";

            const totalPages = Math.ceil(total / pageSize);
            if (totalPages <= 1) return;

            // Previous button
            pagination.innerHTML += `
        <li class="page-item ${currentPage === 1 ? 'd-none' : ''}">
            <a class="page-link" href="#" onclick="getData(${currentPage - 1})">Previous</a>
        </li>
    `;

            // First page
            pagination.innerHTML += createPageItem(1, currentPage);

            if (totalPages > 4 && currentPage > 3) {
                pagination.innerHTML += `<li class="page-item disabled"><span class="page-link">...</span></li>`;
            }

            let start = Math.max(2, currentPage - 1);
            let end = Math.min(totalPages - 1, currentPage + 1);

            for (let i = start; i <= end; i++) {
                pagination.innerHTML += createPageItem(i, currentPage);
            }

            if (totalPages > 4 && currentPage < totalPages - 2) {
                pagination.innerHTML += `<li class="page-item disabled"><span class="page-link">...</span></li>`;
            }

            if (totalPages > 1) {
                pagination.innerHTML += createPageItem(totalPages, currentPage);
            }

            // Next button
            pagination.innerHTML += `
        <li class="page-item ${currentPage === totalPages ? 'd-none' : ''}">
            <a class="page-link" href="#" onclick="getData(${currentPage + 1})">Next</a>
        </li>
    `;
        }

        function createPageItem(page, currentPage) {
            return `
        <li class="page-item ${page === currentPage ? 'active' : ''}">
            <a class="page-link" href="#" onclick="getData(${page})">${page}</a>
        </li>
    `;
        }

        getData(1)

    </script>
</body>

</html>