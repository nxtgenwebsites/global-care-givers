<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HealthCare Providers</title>
    <link rel="shortcut icon" href="assets/icons/logo.svg" type="image/x-icon" />
    <link rel="stylesheet" href="css/swiper.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="admin-dashboard/css/main.css">
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <link rel="stylesheet" href="css/responsive-1.css" />
    <link rel="stylesheet" href="css/facility.css" />
</head>

<body>
    <!-- loading Start -->

    <!-- loading End -->

    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-light">
        <div class="container">
            <!-- Logo -->
            <a class="navbar-brand" href="/">
                <img src="assets/images/logo.png" width="145" class="img-fluid" alt="logo">
            </a>

            <!-- Mobile Toggle Button -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Navbar Links -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul
                    class="navbar-nav align-items-lg-center justify-content-lg-center flex-lg-grow-1 mb-2 mb-lg-0 mt-lg-0 mt-4">
                    <li class="nav-item">
                        <a class="nav-link mx-2 text-primary" href="#">Emergency</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link mx-2 text-primary" href="#">Community</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link mx-2 text-primary" href="#" id="registerBtn">Register</a>
                    </li>
                    <li class="nav-item  d-lg-none" id="logout-btn-container">
                        <button class="dropdown-item py-2 text-primary fw-semibold logout-btn nav-link mx-2 text-primary" id="logout-btn2">
                            Logout
                        </button>
                    </li>
                </ul>

                <!-- Login Button -->
                <div class="d-flex ms-lg-auto" id="login-btn">
                    <a href="login.html" class="btn primary-btn">Login</a>
                </div>

                <div class="d-flex ms-lg-auto d-none" id="profile-btn">
                    <div class="dropdown d-none d-lg-block">
                        <div class="dropdown-toggle d-flex align-items-center gap-2 show" data-bs-toggle="dropdown"
                            style="cursor: pointer;" aria-expanded="true">
                            <img src="assets/1.png" alt="" class="user-avatar">
                            <span class=" d-inline user-name"></span>
                        </div>
                        <ul class="dropdown-menu shadow"
                            style="width: 313px; padding: 16px; border-radius: 0px; border: none; position: absolute; inset: 0px 0px auto auto; margin: 0px; transform: translate(0px, 42.2222px);"
                            data-popper-placement="bottom-end">
                            <li class="dropdown-header p-0 mb-3">
                                <div class="d-flex gap-3 align-items-center">
                                    <img src="assets/1.png" width="30" class="img-fluid" alt=""
                                        style="width: 87px; height: 87px; border-radius: 50%;">
                                    <div>
                                        <h6 class="mb-0 user-name"></h6>
                                        <small class="text-muted" id="user-role"></small>
                                    </div>
                                </div>
                            </li>
                            <div class="border-top mt-2 pt-2">
                                <button class="dropdown-item py-2 text-primary fw-semibold" id="logout-btn">
                                    Logout
                                </button>
                            </div>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </nav>

    <!-- Navbar End -->
    <div class="container-fluid py-4">
        <div class="row mb-4">
            <div class="col-12 text-center heading-text">
                <h2 class="page-head">HealthCare <span>Providers</span></h2>
                <p class="heading-paraf">Register your healthcare facility using either bulk upload or step-by-step form</p>
            </div>
        </div>

        <div class="row">
            <div class="col-12 container-box">
                <div class="card">
                    <ul class="nav nav-tabs providerTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active w-100" id="bulk-tab" data-bs-toggle="tab"
                                data-bs-target="#bulk" type="button" role="tab">
                                Bulk Upload Health Care Providers Data
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link w-100" id="form-tab" data-bs-toggle="tab" data-bs-target="#form"
                                type="button" role="tab">
                                Health Care Providers Registration Form
                            </button>
                        </li>
                    </ul>


                    <!-- Tab Content -->
                    <div class="tab-content" id="providerTabContent">
                        <!-- Bulk Upload Tab -->
                        <div class="tab-pane fade show active" id="bulk" role="tabpanel">
                            <div class="card-body">
                                <div class="text-center mb-5">
                                    <p class="text-muted download-btn">
                                        Upload Health Care providers' data using a file containing all of their
                                        information.
                                        This is particularly useful when you have a large number of health care
                                        providers to import.
                                    </p>
                                </div>

                                <div class="mb-3 d-flex justify-content-between align-items-center">
                                    <span class="text-muted download-btn upload-txt">
                                        <i class="bi bi-cloud-arrow-up"></i>
                                        Upload your file
                                    </span>
                                    <a href="assets\DB Structure for Health Care Providers.xlsx"
                                        class="text-primary text-decoration-none download-btn">
                                        <i class="fas fa-download me-1"></i>
                                        Download sample file (.xls format)
                                    </a>
                                </div>

                                <!-- Drag & Drop Area -->
                                <div class="drag-area" id="dragArea">
                                    <div class="text-center py-3">
                                        <div class="mb-2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="66" height="66"
                                                fill="#8B98A5" class="bi bi-cloud-arrow-up" viewBox="0 0 16 16">
                                                <path fill-rule="evenodd"
                                                    d="M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708z" />
                                                <path
                                                    d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z" />
                                            </svg>
                                        </div>
                                        <p class="text-muted mb-2 download-btn">Select your file or drag and drop it
                                            here</p>
                                        <p class="text-muted small mb-3 download-btn">.csv, .xls, .xlsx or .txt (max.
                                            80MB)</p>
                                        <button class="btn btn-primary browsebtn px-4">
                                            Browse File
                                        </button>
                                        <input type="file" id="fileInput" hidden accept=".csv,.xls,.xlsx">
                                    </div>
                                </div>
                                <!-- Add this after the drag-area div -->
                                <div id="uploadProgress" class="upload-progress">
                                    <p class="text-center mb-3">Uploading file...</p>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0"
                                            aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <p class="text-center text-muted mt-2" id="uploadStatus">Processing...</p>
                                </div>

                                <!-- Field Mapping Section -->
                                <div class="field-mapping mt-4" id="fieldMapping" style="display: none;">
                                    <h5 class="mb-3">Map CSV Fields</h5>
                                    <div id="mappingContainer">
                                        <!-- Mapping fields will be added dynamically -->
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">organization_name:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="organization_name">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">facility_type:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="facility_type">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">ownership_type:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="ownership_type">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">email_address:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="email_address">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">phone_number:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="phone_number">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">country:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="csv-country">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">Street Address:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="street_address">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">city:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="city_name">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">state:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="state">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">zipcode:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="zipcode">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">google_map_link:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="google_map_link">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">A&E:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="A&E">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mapping-row">
                                            <div class="row align-items-center">
                                                <div class="col-md-4">
                                                    <label class="form-label mb-0">is_24hours:</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="form-select" id="is_24hours">
                                                        <option value="">Select CSV Column (Optional)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="btn btn-success mt-3" onclick="submitMapping()">
                                        Confirm Mapping
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Step Form Tab -->
                        <div class="tab-pane fade" id="form" role="tabpanel">
                            <div class="card-body right-column">
                                <!-- Progress Bar -->
                                <div class="progress mb-4" style="height: 3px;">
                                    <div class="progress-bar" role="progressbar" id="formProgress" style="width: 33%">
                                    </div>
                                </div>

                                <div class="d-flex justify-content-between mb-4">
                                    <span class="step-indicator  active" id="step1Indicator">Organization Details</span>
                                    <span class="step-indicator " id="step2Indicator">Location</span>
                                    <span class="step-indicator " id="step3Indicator">Complete Registration</span>
                                </div>

                                <!-- Step 1: Organization Details -->
                                <form id="step1" class="form-step">
                                    <div class="mb-3">
                                        <input type="text" class="form-control" name="org_name"
                                            placeholder="Organization Name*" required>
                                    </div>
                                    <div class="mb-3">
                                        <select class="form-select" name="facility_type" id="facilityType" required>
                                            <option value="">Facility Type*</option>
                                            <option value="hospital">Hospital</option>
                                            <option value="emergency">Emergency</option>
                                            <option value="medical labs">Medical Labs</option>
                                            <option value="chemists">Chemists</option>
                                            <option value="other">Other</option>
                                        </select>
                                        <!-- Add this new div for custom facility type -->
                                        <div id="otherFacilityType" style="display: none;" class="mt-2">
                                            <input type="text" class="form-control" name="other_facility_type"
                                                placeholder="Please specify facility type*">
                                        </div>
                                    </div>

                                    <!-- Update the Ownership Type select and add a new input field -->
                                    <div class="mb-3">
                                        <select class="form-select" name="ownership_type" id="ownershipType" required>
                                            <option value="">Ownership Type*</option>
                                            <option value="government">Government</option>
                                            <option value="state">State</option>
                                            <option value="private">Private</option>
                                            <option value="charity">Charity</option>
                                            <option value="church">Church</option>
                                            <option value="other">Other</option>
                                        </select>
                                        <!-- Add this new div for custom ownership type -->
                                        <div id="otherOwnershipType" style="display: none;" class="mt-2">
                                            <input type="text" class="form-control" name="other_ownership_type"
                                                placeholder="Please specify ownership type*">
                                        </div>
                                    </div>


                                    <div class="mb-3">
                                        <input type="email" class="form-control" name="email_address"
                                            placeholder="Email Address*" required>
                                    </div>
                                    <div class="mb-3">
                                        <input type="tel" class="form-control" name="phone_number"
                                            placeholder="Phone Number*" required>
                                    </div>
                                    <div class="text-end">
                                        <button type="button" class="btn btn-primary" id="nextBtn"
                                            onclick="nextStep(event)">Next</button>
                                    </div>
                                </form>

                                <!-- Step 2: Location Information -->
                                <form id="step2" class="form-step" style="display: none;">
                                    <div class="mb-3 form-group">
                                        <select id="country" class="form-select country-drop-down" name="country"
                                            required>
                                            <option value="">Select Country*</option>
                                        </select>
                                    </div>
                                    <div class="mb-3 form-group">
                                        <select id="state-drop-down" class="form-select select-state" required disabled>
                                            <option value="">Select State*</option>
                                        </select>
                                    </div>
                                    <div class="mb-3 form-group">
                                        <input type="text" class="form-control" name="street-address"
                                            placeholder="Street Address*" required>
                                    </div>
                                    <div class="mb-3 form-group">
                                        <input type="text" class="form-control" name="city" placeholder="City*"
                                            required>
                                    </div>
                                    <div class="mb-3">
                                        <input type="text" class="form-control" name="zipcode" placeholder="Zipcode">
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <button type="button" class="btn btn-secondary" id="prevBtn"
                                            onclick="prevStep(event)">Previous</button>
                                        <button type="button" class="btn btn-primary" id="nextBtn"
                                            onclick="nextStep(event)">Next</button>
                                    </div>
                                </form>

                                <!-- Step 3: Additional Details -->
                                <form id="step3" class="form-step" style="display: none;">
                                    <div class="mb-3">
                                        <input type="url" class="form-control" name="google_map_link"
                                            placeholder="Google Map Link">
                                    </div>

                                    <!-- A&E Available Section -->
                                    <div class="mb-3 d-flex justify-content-between align-items-center"
                                        style="margin-bottom: 40px !important; margin-top: 40px !important;">
                                        <div class="radio-label">Is your facility A&E?</div>
                                        <div class="d-flex gap-3">
                                            <div class="form-check form-check-inline mb-0">
                                                <input class="form-check-input" type="radio" name="ae_available"
                                                    id="ae_yes" value="yes" checked>
                                                <label class="form-check-label" for="ae_yes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline mb-0">
                                                <input class="form-check-input" type="radio" name="ae_available"
                                                    id="ae_no" value="no">
                                                <label class="form-check-label" for="ae_no">No</label>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 24 Hours Service Section -->
                                    <div class="mb-3 d-flex justify-content-between align-items-center">
                                        <div class="radio-label">Is 24 Hours Service?*</div>
                                        <div class="d-flex gap-3">
                                            <div class="form-check form-check-inline mb-0">
                                                <input class="form-check-input" type="radio" name="is_24hours"
                                                    id="24hours_yes" value="yes" checked>
                                                <label class="form-check-label" for="24hours_yes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline mb-0">
                                                <input class="form-check-input" type="radio" name="is_24hours"
                                                    id="24hours_no" value="no">
                                                <label class="form-check-label" for="24hours_no">No</label>
                                            </div>
                                        </div>
                                    </div>


                                    <!-- Time Schedule Fields -->
                                    <div id="timeSchedule" style="display: none;" class="mt-4">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <h6 class="mb-4">Operating Hours</h6>
                                            <button id="setAllButton"
                                                class="mb-4 border-0 p-1 bg-transparent text-primary text-decoration-underline">Set
                                                All</button>
                                        </div>
                                        <div class="time-slots">
                                            <!-- Will be populated by JavaScript -->
                                        </div>
                                    </div>

                                    <div class="d-flex justify-content-between mt-4">
                                        <button type="button" class="btn btn-secondary"
                                            onclick="prevStep(event)">Previous</button>
                                        <button type="button" class="btn btn-primary submit-data-from" id="submit-btn"
                                            onclick="nextStep(event)">Submit</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Thank You Message -->
        <div class="thank-you-message text-center py-5" id="thankYouMessage" style="display: none;">
            <div class="success-icon mb-4">
                <i class="fas fa-check-circle text-success" style="font-size: 48px;"></i>
            </div>
            <h3 class="text-success mb-3">Thank You!</h3>
            <p class="text-muted">Your information has been successfully submitted.</p>
            <button class="btn btn-primary mt-3 uploadbtn" id="submit-another">Submit Another</button>
        </div>
    </div>
    <!-- Hero Start -->
    <!-- Blogs End -->

    <!-- Footer start -->
    <footer class="footer-section">
        <div class="container">
            <div class="row row-gap-3">
                <div class="col-lg-5 col-md-6 text-md-start text-center">
                    <div class="footer-card">
                        <div class="footer-img">
                            <a href="">
                                <img src="assets/images/logo.png" width="150" alt="" class="img-fluid">
                            </a>
                        </div>
                        <div class="footer-content">
                            <p class="mt-4 mb-3">Join our newsletter for latest updates <br>
                                and features. You don't want to miss it!</p>
                            <div class="footer-subscribe position-relative w-100">
                                <input type="email" class="" placeholder="Enter your email here">
                                <button type="submit" class="btn">Subscribe</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 text-md-start text-center">
                    <ul class="navbar-nav">
                        <h5 class="fw-bold footer-heading text-primary">Home</h5>
                        <li class="nav-item"><a href="emergency.html" class="nav-link">Emergency</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Symptoms</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Remote Care</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Monitors</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Health Info</a></li>
                        <li class="nav-item"><a href="#" class="nav-link">Blogs</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 text-md-start text-center">
                    <ul class="navbar-nav">
                        <h5 class="fw-bold footer-heading text-primary">Communities</h5>
                        <li class="nav-item"><a href="/user-dashboard/hospitals.html" class="nav-link">Hospitals</a>
                        </li>
                        <li class="nav-item"><a href="#" class="nav-link">Pharmacy</a></li>
                        <li class="nav-item"><a href="/user-dashboard/Chemists.html" class="nav-link">Community Digital
                                Health Assistants</a></li>
                        <li class="nav-item"><a href="#" class="nav-link">Tech Support</a></li>
                        <li class="nav-item"><a href="/user-dashboard/complaints.html" class="nav-link">Complaints</a>
                        </li>
                        <li class="nav-item"><a href="/user-dashboard/reviews.html" class="nav-link">Reviews</a></li>
                        <li class="nav-item"><a href="/user-dashboard/privacy-policy.html" class="nav-link">Privacy
                                Policy</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 text-md-start text-center">
                    <ul class="navbar-nav">
                        <h5 class="fw-bold footer-heading text-primary">Profile</h5>
                        <li class="nav-item"><a href="login.html" class="nav-link">Sponsorship</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Print</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Password & Pin</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Access Control</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">National Policies</a></li>
                        <li class="nav-item"><a href="#" class="nav-link">Share link</a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link">Delete Account</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <hr class="mt-5 mb-2">
        <div class="copyright-section d-flex align-items-center">
            <p class="font-size">© Copyright 2025 HealthMonitor. All rights reserved</p>
            <p class="ms-md-auto me-3 font-size">Share on socials</p>
            <div class="social-media">
                <img src="assets/icons/X.svg" alt="img" class="">
                <img src="assets/icons/Facebook.svg" alt="img" class="">
                <img src="assets/icons/Instagram.svg" alt="img" class="">
                <img src="assets/icons/Telegram.svg" alt="img" class="">
            </div>
        </div>

    </footer>
    <!-- Footer end -->

    <!-- Demo Video Start -->
    <!-- <div class="demo-video d-none" id="demo-video">
        <div class="video-popup">
            <iframe src="https://www.youtube.com/embed/1WGTftm_IEU?si=LRPCj-aTZp5tMti9"></iframe>
        </div>
    </div> -->
    <!-- Demo Video End -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.full.min.js"></script>


    <script>
        let time_slots  = [];

        const id = localStorage.getItem('u_id');

        console.log(id);
        axios.get('https://health-care-facilities-backend.vercel.app/api/get-user', {
            headers: {
                'id': id
            }
        }).then((res) => {
            const userName = document.querySelectorAll('.user-name');
            const email = document.getElementById('user-role');

            userName.forEach((name) => {
                name.innerHTML = `${res.data.user.name} ${res.data.user.last_name}`;
            })

            email.innerHTML = res.data.user.role

        }).catch((err) => {
            console.log(err);
        })

        const isLoginIn = localStorage.getItem('login');
        const loginBtn = document.getElementById('login-btn');
        const loginOut = document.getElementById('logout-btn');
        const loginOut2 = document.getElementById('logout-btn2');
        const profileBtn = document.getElementById('profile-btn');
        const logoutBtnContainer = document.getElementById('logout-btn-container');
        if (isLoginIn === 'true') {
            loginBtn.classList.add('d-none');
            profileBtn.classList.remove('d-none');
            logoutBtnContainer.classList.remove('d-none');
        } else {
            location.href= '/login.html';
            loginBtn.classList.remove('d-none');
            profileBtn.classList.add('d-none');
            logoutBtnContainer.classList.add('d-none');
            
        }

        loginOut.addEventListener(('click'), () => {
            localStorage.removeItem('login')
            localStorage.removeItem('u_id')
            location.reload()
        })
        loginOut2.addEventListener(('click'), () => {
            localStorage.removeItem('login')
            localStorage.removeItem('userId')
            location.reload()
        })

        document.getElementById('submit-another').addEventListener(('click'), () => {
            const allfrom = document.querySelectorAll('form');

            allfrom.forEach((item) => {
                item.reset();
            })
        })

        document.getElementById("registerBtn").addEventListener("click", function () {
            // Find the form-tab button
            var formTab = document.getElementById("form-tab");

            // Trigger click event on form-tab button
            formTab.click();
        });

        document.addEventListener('DOMContentLoaded', function () {
            const timeScheduleDiv = document.getElementById('timeSchedule');
            const timeSlotsDiv = document.querySelector('.time-slots');
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];

            // Function to create time slots dynamically
            function createTimeSlots() {
                timeSlotsDiv.innerHTML = days.map(day => `
            <div class="time-slot row align-items-center g-3 mb-2">
                <div class="col-3">
                    <span class="day-label">${day}</span>
                </div>
                <div class="col-9">
                    <div class="d-flex align-items-center time-input-group">
                        <input type="time" class="form-control form-control-sm start-time" data-day="${day}" required>
                        <span class="time-separator mx-2">to</span>
                        <input type="time" class="form-control form-control-sm end-time" data-day="${day}" required>
                    </div>
                </div>
            </div>
        `).join('');
            }

            // Function to copy the start and end time of the first day to all other days
            function setAllTimes(event) {
                event.preventDefault();
                       // Get first available start and end time (assuming first row is reference)
                let firstStartTime = document.querySelector(".start-time").value;
                let firstEndTime = document.querySelector(".end-time").value;

                if (!firstStartTime || !firstEndTime) {
                    alert("Please set the first day's time before applying to all.");
                    return;
                }

                // Apply to all days except Saturday & Sunday
                document.querySelectorAll(".time-slot").forEach(slot => {
                    let day = slot.querySelector(".day-label").textContent;

                    if (day !== "Saturday" && day !== "Sunday") {
                        slot.querySelector(".start-time").value = firstStartTime;
                        slot.querySelector(".end-time").value = firstEndTime;
                    }
                });
            }

            // Event listener for the "Set All" button
            setAllButton.addEventListener('click', setAllTimes);

            // Handle 24-hour facility toggle
            document.querySelectorAll('input[name="is_24hours"]').forEach(radio => {
                radio.addEventListener('change', function () {
                    if (this.value === 'no') {
                        createTimeSlots(); // Generate the time slots when shown
                        timeScheduleDiv.style.display = 'block';
                    } else {
                        timeScheduleDiv.style.display = 'none';
                    }
                });
            });

            // Ensure A&E radio buttons are required
            document.querySelectorAll('input[name="ae_available"]').forEach(radio => {
                radio.required = true;
            });


            const submitBtn = document.querySelector('.submit-data-from');
            // Submit button event
            submitBtn.addEventListener('click', async () => {
                // Collect form data
                const formData = {
                    organisation_name: document.querySelector('input[name="org_name"]').value,
                    facility_type: document.querySelector('select[name="facility_type"]').value,
                    ownership: document.querySelector('select[name="ownership_type"]').value,
                    state: document.querySelector('.select-state').value,
                    country: document.querySelector('.country-drop-down option:checked')?.innerText,
                    city: document.querySelector('input[name="city"]').value,
                    address: document.querySelector('input[name="street-address"]').value,
                    zip_code: document.querySelector('input[name="zipcode"]').value,
                    email: document.querySelector('input[name="email_address"]').value,
                    phone: document.querySelector('input[name="phone_number"]').value,
                    google_maps_link: document.querySelector('input[name="google_map_link"]').value,
                    is_24_hours: document.querySelector('input[name="is_24hours"]:checked').value,
                    facility_a_e: document.querySelector('input[name="ae_available"]:checked').value,
                    time_slots: []
                };

                // Only add time slots if the facility is NOT 24 hours
                if (formData.is_24_hours === 'no') {
                    document.querySelectorAll('.time-slot').forEach(slot => {
                        const day = slot.querySelector('.day-label').innerText;
                        const startTime = slot.querySelector('.start-time')?.value;
                        const endTime = slot.querySelector('.end-time')?.value;

                        if (startTime && endTime) {
                            formData.time_slots.push({ day, start_time: startTime, end_time: endTime });
                        }
                    });
                }

                console.log("Submitting form data:", JSON.stringify(formData, null, 2));

                try {
                    const response = await axios.post('https://health-care-facilities-backend.vercel.app/api/save', formData);

                    // Reload after submission
                    setTimeout(() => {
                        location.reload();
                    }, 1000);
                } catch (error) {
                    console.error("Error submitting form:", error.response?.data || error);
                }
            });
        });

        // File Upload Handling
        const dragArea = document.getElementById('dragArea');
        const fileInput = document.getElementById('fileInput');
        const filePreview = document.getElementById('filePreview');
        const startImportBtn = document.getElementById('startImportBtn');
        const fieldMapping = document.getElementById('fieldMapping');
        let selectedFile = null;
        // Add required fields for mapping
        const mappingFields = [
            'organization_name',
            'facility_type',
            'ownership_type',
            'email_address',
            'phone_number',
            'facility_address',
            'country',
            'city',
            'state',
            'zipcode',
            'google_map_link',
            'A&E',
            'is_24hours'
        ];

        let data = []; // Global variable to store processed data

        document.addEventListener("DOMContentLoaded", function () {
            const dragArea = document.getElementById("dragArea");
            const fileInput = document.getElementById("fileInput");

            if (!dragArea || !fileInput) {
                console.error("Required elements not found!");
                return;
            }

            dragArea.addEventListener("click", (e) => {
                if (!e.target.matches("#startImportBtn")) {
                    fileInput.click();
                }
            });

            fileInput.addEventListener("change", function () {
                if (this.files.length > 0) {
                    uploadFile(this.files[0]);
                }
            });

            function uploadFile(file) {
                 const formData = new FormData();
                formData.append("file", file);

                axios.post("https://health-care-facilities-backend.vercel.app/api/upload", formData, {
                    headers: { "Content-Type": "multipart/form-data" }
                })
                    .then(response => {
                        if (!response.data.dropdownData || response.data.dropdownData.length < 2) {
                            throw new Error("Invalid API response format");
                        }

                        const [headers, ...rows] = response.data.dropdownData; // Extract headers and rows

                        time_slots  = rows.map(item => ({
                            day: 'all',
                            start_time: `${item[13]}`,
                            end_time: `${item[14]}`
                        }));


                        if (!Array.isArray(headers) || headers.length === 0) {
                            throw new Error("Invalid headers format");
                        }

                        if (!Array.isArray(rows) || rows.length === 0) {
                            throw new Error("No data rows found");
                        }

                        // Convert rows into an array of objects dynamically
                        data = rows.map((row, rowIndex) => {
                            const obj = headers.reduce((obj, key, colIndex) => {
                                obj[key] = row[colIndex] !== undefined ? row[colIndex] : null;
                                return obj;
                            }, {});

                            // Add time_slots  to each entry in the data array
                            obj.time_slots  = time_slots [rowIndex];
                            return obj;
                        });

                    })
                    .catch(error => {
                        console.error("File upload failed:", error.response?.data || error.message);
                        alert("Upload failed! " + (error.response?.data?.message || "Please try again."));
                        location.reload();
                    });
            }
        });


        // Drag and drop handlers
        dragArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            dragArea.classList.add('active');
        });

        dragArea.addEventListener('dragleave', () => {
            dragArea.classList.remove('active');
        });

        dragArea.addEventListener('drop', (e) => {
            e.preventDefault();
            dragArea.classList.remove('active');
            const file = e.dataTransfer.files[0];
            handleFile(file);
        });

        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            handleFile(file);
        });

        function handleFile(file) {
            if (file.type === 'text/csv' || file.name.endsWith('.csv') ||
                file.name.endsWith('.xls') || file.name.endsWith('.xlsx')) {
                selectedFile = file;
                updateFilePreview(file);
            } else {
                alert('Please upload a CSV, XLS, or XLSX file');
            }
        }

        function updateFilePreview(file) {
            const fileSize = (file.size / (1024 * 1024)).toFixed(2); 
            dragArea.innerHTML = `
        <div class="text-center py-3">
            <div class="mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="#28a745" class="bi bi-file-earmark-check" viewBox="0 0 16 16">
                    <path d="M10.854 7.854a.5.5 0 0 0-.708-.708L7.5 9.793 6.354 8.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z"/>
                    <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"/>
                </svg>
            </div>
            <p class="text-success mb-1">${file.name}</p>
            <p class="text-muted small mb-3">${fileSize} MB</p>
            <button class="btn btn-primary browsebtn px-4" id="startImportBtn" onclick="startImport(event)">
                Start Import
            </button>
        </div>
    `;
        }

        function startImport(event) {
            event.stopPropagation();
            if (selectedFile) {
                // Hide drag area
                dragArea.style.display = 'none';

                // Show progress bar
                const uploadProgress = document.getElementById('uploadProgress');
                uploadProgress.style.display = 'block';
                const progressBar = uploadProgress.querySelector('.progress-bar');
                const statusText = document.getElementById('uploadStatus');

                // Simulate progress
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 5;
                    progressBar.style.width = `${progress}%`;
                    progressBar.setAttribute('aria-valuenow', progress);

                    if (progress < 50) {
                        statusText.textContent = 'Uploading file...';
                    } else if (progress < 80) {
                        statusText.textContent = 'Processing data...';
                    } else {
                        statusText.textContent = 'Finalizing...';
                    }

                    if (progress >= 100) {
                        clearInterval(interval);
                        setTimeout(() => {
                            // Hide progress bar
                            uploadProgress.style.display = 'none';

                            // Continue with field mapping
                            const reader = new FileReader();
                            reader.onload = function (e) {
                                const headers = e.target.result.split('\n')[0].split(',');
                                showFieldMapping();
                            };
                            reader.readAsText(selectedFile);
                        }, 500);
                    }
                }, 50);
            }
        }

        const dataArray = Object.entries(data).map(([key, value]) => ({
            label: key,
            value: value !== null && value !== undefined ? value : 'No Data'
        }));

        function showFieldMapping() {
            document.getElementById('fieldMapping').style.display = 'block';
            const InpContainer = document.getElementById('mappingContainer');
            data.slice(0, 5).map((item) => {
                document.getElementById('organization_name').append(new Option(item.organisation_name, item.organisation_name));
                document.getElementById('facility_type').append(new Option(item.facility_type, item.facility_type));
                document.getElementById('ownership_type').append(new Option(item.ownership, item.ownership));
                document.getElementById('email_address').append(new Option(item.email_address, item.email_address));
                document.getElementById('phone_number').append(new Option(item.phone_number, item.phone_number));
                document.getElementById('street_address').append(new Option(item.address, item.address));
                document.getElementById('csv-country').append(new Option(item.country, item.country));
                document.getElementById('city_name').append(new Option(item.city, item.city));
                document.getElementById('state').append(new Option(item.state, item.state));
                document.getElementById('zipcode').append(new Option(item.zip_code, item.zip_code));
                document.getElementById('google_map_link').append(new Option(item.google_maps_link, item.google_maps_link));
                if (item['is_A&E'] !== null) {
                    document.getElementById('A&E').append(new Option(item['is_A&E'], item['is_A&E']));
                }
                if (item.is_24_hours !== null) {
                    document.getElementById('is_24hours').append(new Option(item.is_24_hours, item.is_24_hours));
                }
            });

        }

        // showFieldMapping()

        async function submitMapping() {
            await axios.post('https://health-care-facilities-backend.vercel.app/api/save-file', data).then((res) => {
                location.reload();
            }).catch((err) => {
                console.log(err);
            })
            // console.log(data);
            showThankYouMessage(true); // Pass true for bulk upload
        }

        function submitForm(event) {
            if (event) {
                event.preventDefault();
            }
            showThankYouMessage(false); // Pass false for step form
        }
        // Form step handling
        // Form step handling
        let currentStep = 1;
        const totalSteps = 3;

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('formProgress').style.width = `${progress}%`;

            // Update step indicators
            for (let i = 1; i <= totalSteps; i++) {
                const indicator = document.getElementById(`step${i}Indicator`);
                if (i === currentStep) {
                    indicator.classList.add('active');
                } else if (i < currentStep) {
                    indicator.classList.add('completed');
                    indicator.classList.remove('active');
                } else {
                    indicator.classList.remove('active', 'completed');
                }
            }
        }

        function showStep(step) {
            // Hide all forms
            document.querySelectorAll('.form-step').forEach(form => {
                form.style.display = 'none';
            });

            // Show current step
            document.getElementById(`step${step}`).style.display = 'block';

            // Update buttons
            document.getElementById('prevBtn').style.display = step === 1 ? 'none' : 'block';
            document.getElementById('nextBtn').innerHTML = step === totalSteps ? 'Submit' : 'Next';

            updateProgress();
        }

        // Replace the existing nextStep and prevStep functions with these:
        function nextStep(e) {
            if (e) {
                e.preventDefault(); // Prevent form submission
            }
            // Validate current step
            const currentForm = document.getElementById(`step${currentStep}`);
            if (currentForm.checkValidity()) {
                if (currentStep < totalSteps) {
                    currentStep++;
                    showStep(currentStep);
                } else {
                    // Handle form submission
                    submitForm();
                }
            } else {
                currentForm.reportValidity();
            }
        }

        function prevStep(e) {
            if (e) {
                e.preventDefault(); // Prevent form submission
            }
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        // Handle time schedule visibility
        // Handle time schedule visibility
        // document.addEventListener('DOMContentLoaded', function () {
        //     const timeScheduleDiv = document.getElementById('timeSchedule');
        //     const timeSlotsDiv = timeScheduleDiv.querySelector('.time-slots');
        //     const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];

        //     // Create time slots
        //     function createTimeSlots() {
        //         timeSlotsDiv.innerHTML = days.map(day => `
        //     <div class="time-slot row align-items-center g-3 mb-2">
        //         <div class="col-3">
        //             <span class="day-label">${day}</span>
        //         </div>
        //         <div class="col-9">
        //             <div class="d-flex align-items-center time-input-group">
        //                 <input type="time" class="form-control form-control-sm" name="${day.toLowerCase()}_start" 
        //                        placeholder="Start Time" required>
        //                 <span class="time-separator mx-2">to</span>
        //                 <input type="time" class="form-control form-control-sm" name="${day.toLowerCase()}_end" 
        //                        placeholder="End Time" required>
        //             </div>
        //         </div>
        //     </div>
        // `).join('');
        //     }

        //     // Handle 24 hours toggle
        //     document.querySelectorAll('input[name="is_24hours"]').forEach(radio => {
        //         radio.addEventListener('change', function () {
        //             const showTimeSchedule = this.value === 'no';
        //             if (showTimeSchedule) {
        //                 createTimeSlots(); // Create the time slots when showing
        //             }
        //             timeScheduleDiv.style.display = showTimeSchedule ? 'block' : 'none';

        //             // Update required attribute for time inputs
        //             const timeInputs = timeScheduleDiv.querySelectorAll('input[type="time"]');
        //             timeInputs.forEach(input => {
        //                 input.required = showTimeSchedule;
        //             });
        //         });
        //     });

        //     // Add required to A&E radio buttons
        //     document.querySelectorAll('input[name="ae_available"]').forEach(radio => {
        //         radio.required = true;
        //     });
        // });
        const countryDropdown = $('#country');
        const stateDropdown = $('#state-drop-down');
        const cityDropdown = $('#city');

        // Step 1: Load Countries
        function loadCountries() {
            $.ajax({
                url: 'https://restcountries.com/v3.1/all',
                method: 'GET',
                success: function (data) {
                    // Sort countries alphabetically
                    const sortedCountries = data.sort((a, b) =>
                        a.name.common.localeCompare(b.name.common)
                    );

                    // Populate the country dropdown
                    countryDropdown.empty().append('<option value="">Select Country</option>');
                    sortedCountries.forEach(country => {
                        countryDropdown.append(new Option(country.name.common, country.cca2)); // ISO code as value
                    });
                },
                error: function () {
                    alert('Failed to load countries. Try again later.');
                }
            });
        }

        // Step 2: Load States
        function loadStates(countryCode) {
            console.log('Fetching states for country code:', countryCode); // Debugging log
            $.ajax({
                url: `https://wft-geo-db.p.rapidapi.com/v1/geo/countries/${countryCode}/regions`,
                method: 'GET',
                headers: {
                    'x-rapidapi-host': 'wft-geo-db.p.rapidapi.com',
                    'x-rapidapi-key': 'b83f74efaamshb4574179b332748p156dadjsn907ed0ab88f9' // Replace with your actual API key
                },
                success: function (data) {
                    console.log('States fetched successfully:', data); // Debugging log
                    stateDropdown.empty().append('<option value="">Select State</option>');
                    if (data.data && data.data.length > 0) {
                        data.data.forEach(state => {
                            stateDropdown.append(new Option(state.name, state.code));
                        });
                        stateDropdown.prop('disabled', false);

                    } else {
                        alert('No states found for the selected country.');
                    }
                },
                error: function (xhr, status, error) {
                    console.error('Error fetching states:', error); // Debugging log
                    alert('Failed to load states. Please try again later.');
                }
            });
        }

        // Step 3: Load Cities

        // Step 4: Event Listeners
        $(document).ready(function () {
            // Load countries on page load
            loadCountries();

            // When a country is selected, load states
            countryDropdown.on('change', function () {
                const countryCode = $(this).val();
                if (countryCode) {
                    loadStates(countryCode);
                    cityDropdown.prop('disabled', true).empty().append('<option value="">Select City</option>');
                } else {
                    stateDropdown.prop('disabled', true).empty().append('<option value="">Select State</option>');
                    cityDropdown.prop('disabled', true).empty().append('<option value="">Select City</option>');
                }
            });

            // When a state is selected, load cities
            stateDropdown.on('change', function () {
                const stateCode = $(this).val();
                const countryCode = countryDropdown.val();
                if (stateCode && countryCode) {
                    loadCities(stateCode, countryCode);
                } else {
                    cityDropdown.prop('disabled', true).empty().append('<option value="">Select City</option>');
                }
            });
        });
        function resetForm() {
            selectedFile = null;
            // Reset file upload area
            dragArea.innerHTML = `
        <div class="text-center py-3">
            <div class="mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="66" height="66" fill="#8B98A5" class="bi bi-cloud-arrow-up" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708z"/>
                    <path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"/>
                </svg>
            </div>
            <p class="text-muted mb-1 small">Select your file or drag and drop it here</p>
            <p class="text-muted small mb-2">CSV, XLS or XLSX (max. 800MB)</p>
            <button class="btn btn-primary browsebtn px-3 py-1" onclick="document.getElementById('fileInput').click()">
                Browse File
            </button>
            <input type="file" id="fileInput" hidden accept=".csv,.xls,.xlsx">
        </div>
    `;
            fileInput.value = '';

            // Show all sections again
            const uploadSection = document.querySelector('.card');
            if (uploadSection) uploadSection.style.display = 'block';
            dragArea.style.display = 'block';
            fieldMapping.style.display = 'none';
            document.getElementById('thankYouMessage').style.display = 'none';

            // Show the form and divider again
            const formColumn = document.getElementById('formColumn');
            const orDivider = document.querySelector('.divider');
            if (formColumn) {
                formColumn.style.display = 'block';
                // Reset form to first step
                currentStep = 1;
                showStep(1);
                // Clear all form inputs
                document.querySelectorAll('.form-step input, .form-step select').forEach(input => {
                    input.value = '';
                });
            }
            if (orDivider) orDivider.style.display = 'flex';

            // Reattach click event to drag area
            dragArea.addEventListener('click', (e) => {
                if (!e.target.matches('#startImportBtn')) {
                    fileInput.click();
                }
            });
        }

        function submitForm() {
            // Hide the entire container except header and footer
            const container = document.querySelector('.container-fluid.py-4');
            if (container) {
                container.style.display = 'none';
            }

            // Show the thank you message
            const thankYouMessage = document.getElementById('thankYouMessage');
            if (thankYouMessage) {
                // Move thank you message outside the main container
                document.body.insertBefore(thankYouMessage, document.querySelector('footer'));
                thankYouMessage.style.display = 'block';
                thankYouMessage.style.margin = '4rem auto';
                thankYouMessage.style.maxWidth = '600px';

                // Scroll to thank you message
                thankYouMessage.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            }
        }

        function resetForm() {
            selectedFile = null;

            // Show the main container again
            const container = document.querySelector('.container-fluid.py-4');
            if (container) {
                container.style.display = 'block';
            }

            // Move thank you message back to original container and hide it
            const thankYouMessage = document.getElementById('thankYouMessage');
            if (thankYouMessage) {
                container.appendChild(thankYouMessage);
                thankYouMessage.style.display = 'none';
            }

            // Reset file upload area
            dragArea.innerHTML = `
        <div class="text-center py-3">
            <div class="mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="66" height="66" fill="#8B98A5" class="bi bi-cloud-arrow-up" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708z"/>
                    <path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"/>
                </svg>
            </div>
            <p class="text-muted mb-1 small">Select your file or drag and drop it here</p>
            <p class="text-muted small mb-2">CSV, XLS or XLSX (max. 800MB)</p>
            <button class="btn btn-primary browsebtn px-3 py-1" onclick="document.getElementById('fileInput').click()">
                Browse File
            </button>
            <input type="file" id="fileInput" hidden accept=".csv,.xls,.xlsx">
        </div>
    `;

            // Reset other form elements
            fileInput.value = '';
            dragArea.style.display = 'block';
            fieldMapping.style.display = 'none';

            // Show form column and reset to first step
            const formColumn = document.getElementById('formColumn');
            if (formColumn) {
                formColumn.style.display = 'block';
                currentStep = 1;
                showStep(1);
                document.querySelectorAll('.form-step input, .form-step select').forEach(input => {
                    input.value = '';
                });
            }

            // Show OR divider
            const orDivider = document.querySelector('.or-divider');
            if (orDivider) {
                orDivider.style.display = 'flex';
            }
        }


        // Initialize Bootstrap tabs
        var triggerTabList = [].slice.call(document.querySelectorAll('.providerTabs button'))
        triggerTabList.forEach(function (triggerEl) {
            var tabTrigger = new bootstrap.Tab(triggerEl)
            triggerEl.addEventListener('click', function (event) {
                event.preventDefault()
                tabTrigger.show()
            })
        })

        // Optional: Add animation when switching tabs
        document.querySelectorAll('.providerTabs button').forEach(tab => {
            tab.addEventListener('shown.bs.tab', function (event) {
                const targetPanel = document.querySelector(event.target.dataset.bsTarget)
                targetPanel.style.opacity = 0
                setTimeout(() => {
                    targetPanel.style.opacity = 1
                }, 50)
            })
        })

        // Add this to your existing JavaScript
        document.addEventListener('DOMContentLoaded', function () {
            // Handle Facility Type
            const facilityType = document.getElementById('facilityType');
            const otherFacilityType = document.getElementById('otherFacilityType');
            const otherFacilityInput = otherFacilityType.querySelector('input');

            facilityType.addEventListener('change', function () {
                if (this.value === 'other') {
                    otherFacilityType.style.display = 'block';
                    otherFacilityInput.required = true;
                } else {
                    otherFacilityType.style.display = 'none';
                    otherFacilityInput.required = false;
                    otherFacilityInput.value = ''; // Clear the input when hidden
                }
            });

            // Handle Ownership Type
            const ownershipType = document.getElementById('ownershipType');
            const otherOwnershipType = document.getElementById('otherOwnershipType');
            const otherOwnershipInput = otherOwnershipType.querySelector('input');

            ownershipType.addEventListener('change', function () {
                if (this.value === 'other') {
                    otherOwnershipType.style.display = 'block';
                    otherOwnershipInput.required = true;
                } else {
                    otherOwnershipType.style.display = 'none';
                    otherOwnershipInput.required = false;
                    otherOwnershipInput.value = ''; // Clear the input when hidden
                }
            });
        });

        function showThankYouMessage(fromBulkUpload = false) {
            // Hide the entire container except header and footer
            const container = document.querySelector('.container-fluid.py-4');
            if (container) {
                container.style.display = 'none';
            }

            // Show and update the thank you message
            const thankYouMessage = document.getElementById('thankYouMessage');
            if (thankYouMessage) {
                // Update message and button based on source
                if (fromBulkUpload) {
                    thankYouMessage.querySelector('p.text-muted').textContent = 'Your file has been successfully submitted and fields have been mapped.';
                    thankYouMessage.querySelector('button').textContent = 'Upload Another File';
                    thankYouMessage.querySelector('button').onclick = resetForm;
                } else {
                    thankYouMessage.querySelector('p.text-muted').textContent = "We've successfully registered your facility as a Health Care Provider.";
                    thankYouMessage.querySelector('button').textContent = 'Return To Home';
                    thankYouMessage.querySelector('button').onclick = () => window.location.href = '/';
                }

                // Move thank you message outside the main container
                document.body.insertBefore(thankYouMessage, document.querySelector('footer'));
                thankYouMessage.style.display = 'block';
                thankYouMessage.style.margin = '4rem auto';
                thankYouMessage.style.maxWidth = '600px';

                // Scroll to thank you message
                thankYouMessage.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            }
        }

    </script>
</body>

</html>